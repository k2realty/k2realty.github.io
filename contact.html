<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta http-equiv="Permissions-Policy" content="interest-cohort=()">
  <link rel="icon" href="images/favicon.ico" type="image/x-icon">
  <link rel="stylesheet" href="output.css">
  <script src="https://kit.fontawesome.com/2d2042756f.js" crossorigin="anonymous"></script>
  <title>K2 Realty Corporation</title>
</head>
<body>
  <i onclick="togglenav()" id="menubtn" class="cursor-pointer fa-solid fa-bars fixed top-5 right-5 text-3xl lg:invisible text-zinc-400"></i>
  <nav id="navbar" class="overflow-y-auto fixed h-full w-0 bg-[#012145] lg:w-52 transition-all overflow-hidden shadow-[5px_0px_20px_0px_rgba(0,0,0,0.5)]">
    <a href="/"><img class="w-32 m-auto my-10" src="images/k2logo.png" alt="K2 Realty logo"></a>
    <div class="flex flex-col p-10">
      <a class="hover:text-zinc-100 mb-2 text-xl text-zinc-400 pl-3 rounded" href="/">Home</a>
      <a class="hover:text-zinc-100 mb-2 text-xl text-zinc-400 pl-3 rounded" href="/buying">Buying</a>
      <a class="hover:text-zinc-100 mb-2 text-xl text-zinc-400 pl-3 rounded" href="/selling">Selling</a>
      <a class="hover:text-zinc-100 mb-2 text-xl text-zinc-400 pl-3 rounded" href="/commercial">Commercial</a>
      <a class="hover:text-zinc-100 mb-2 text-xl text-zinc-400 pl-3 rounded" href="/agents">Agents</a>
      <a class="mb-2 text-xl text-white bg-zinc-700 pl-3 rounded" href="#">Contact</a>
    </div>
    <div class="text-amber-200 text-center text-3xl">
      <a href=""><i class="p-2 hover:text-blue-400 fa-brands fa-twitter"></i></a>
      <a href=""><i class="p-2 hover:text-blue-500 fa-brands fa-facebook"></i></a>
    </div>
    
    <p class="text-gray-500 text-center pt-24" >CopyrightÂ© k2 Realty</p>
  </nav>
  <main class="">
    <section class="lg:pl-52 min-h-screen">
      <div class="container mx-auto p-6 border-b-2 pb-20">
        <h1 class="border-b-2 text-center text-3xl mt-14 mb-8 pb-8 font-bold">Contact</h1>
        <div class="mt-10 sm:mt-0">
          <div class="lg:grid lg:grid-cols-12 lg:gap-6">
            <div class="lg:col-start-3 col-span-8">
              <div class="px-4 sm:px-0">
                <h3 class="text-base font-semibold leading-6 text-gray-900">Request a text, call or email back.</h3>
                <p class="mt-1 text-sm text-gray-600">We will never sell your information, cold call, or spam you!</p>
              </div>
            </div>
            <div class="mt-5 lg:col-start-3 lg:col-span-8 lg:mt-12">
              <form id="form">
                <div class="overflow-hidden shadow-lg sm:rounded-md">
                  <div class="px-4 py-5 sm:p-6">
                    <div class="grid grid-cols-6 gap-6">
                      <div class="col-span-6 md:col-span-3">
                        <label for="fname" class="block text-sm font-medium text-gray-700">First name</label>
                        <input type="text" name="fname" id="fname" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                        <span class="text-red-500 text-xs" id="fnameErr"></span>
                      </div>
                      <div class="col-span-6 md:col-span-3">
                        <label for="lname" class="block text-sm font-medium text-gray-700">Last name</label>
                        <input type="text" name="lname" id="lname" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                      </div>
                      <div class="col-span-6">
                        <label for="email" class="block text-sm font-medium text-gray-700">Email</label>
                        <input type="text" name="email" id="email" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                        <span class="text-red-500 text-xs" id="emailErr"></span>
                      </div>
                      <div class="col-span-6">
                        <label for="phone" class="block text-sm font-medium text-gray-700">Mobile</label>
                        <input type="text" name="phone" id="phone" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                      </div>
                      <div class="col-span-6">
                        <label for="contactMethod" class="block text-sm font-medium text-gray-700">Preferred Contact Method</label>
                        <select id="contactMethod" name="contactMethod" class="mt-1 block w-full rounded-md border border-gray-300 bg-white py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm">
                          <option disabled selected value> -- select an option -- </option>
                          <option>Text</option>
                          <option>Call</option>
                          <option>Email</option>
                        </select>
                      </div>
                      <div class="col-span-6">
                        <label for="subject" class="block text-sm font-medium text-gray-700">Subject</label>
                        <select id="subject" name="subject" class="mt-1 block w-full rounded-md border border-gray-300 bg-white py-2 px-3 shadow-sm focus:border-indigo-500 focus:outline-none focus:ring-indigo-500 sm:text-sm">
                          <option disabled selected value> -- select an option -- </option>
                          <option>Buying a property</option>
                          <option>Selling a property</option>
                          <option>Commercial Real Estate</option>
                          <option>Licencing inquiry</option>
                          <option>General inquiry</option>
                        </select>
                      </div>
                      <div class="col-span-6">
                        <label for="address" class="block text-sm font-medium text-gray-700">Address</label>
                        <input type="text" name="address" id="address" class="mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-indigo-500 focus:ring-indigo-500 sm:text-sm">
                      </div>
                    </div>
                  </div>
                  <div class="bg-gray-50 px-4 py-3 text-right sm:px-6">
                    <span id="success" class="bg-green-500 text-white py-2 px-4 mr-6 rounded hidden">Success! Your message has been sent.</span>
                    <span id="fail" class="bg-red-500 text-white py-2 px-4 mr-6 rounded hidden">Whelp... something went wrong.</span>
                    <button id="submit" type="submit" class="inline-flex justify-center rounded-md border border-transparent bg-indigo-600 py-2 px-4 text-sm font-medium text-white shadow-sm hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2">Send</button>
                  </div>
                </div>
              </form>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

<div id="loader" class="hidden h-screen w-screen z-50 bg-gray-800/80 absolute top-0 left-0 text-center justify-center">
  <i class="text-7xl text-teal-300 animate-spin fa-solid fa-spinner relative top-1/2"></i>
</div>


<script type="text/javascript" src="https://cdn.jsdelivr.net/npm/@emailjs/browser@3/dist/email.min.js"></script>
<script>
   (function(){
      emailjs.init("Y5PtdUWEksa_mOVk2");
   })();

   const form = document.querySelector("#form");

form.addEventListener("submit", e => {
    e.preventDefault();
    
    const fname = form.fname.value.trim();
    const fnameErr = form.querySelector("#fnameErr");
    const lname = form.lname.value.trim();
    const email = form.email.value.trim();
    const emailErr = form.querySelector("#emailErr");
    const phone = form.phone.value.trim();
    const contactMethod = form.contactMethod.value.trim();
    const subject = form.subject.value.trim();
    const address = form.address.value.trim();
   
    const err = {};
    
    if (fname.length === 0){
        err.fname = "First name is missing";
        fnameErr.innerText = err.fname
    } else {
        delete err.fname;
        fnameErr.innerText = "";
    }
    if (email.length < 6){
        err.email = "Valid email is missing";
        emailErr.innerText = err.email;
    } else {
        delete err.email;
        emailErr.innerText = "";
    }
    if (!Object.keys(err).length > 0){
        let templateParams = {
            fname : fname,
            lname : lname,
            email : email,
            phone : phone,
            contactMethod : contactMethod,
            subject : subject,
            address : address,
        }
        
        const loader = document.querySelector("#loader");
        const success = document.querySelector("#success");
        const fail = document.querySelector("#fail");
        const submit = document.querySelector("#submit");

        loader.classList.remove("hidden");
        emailjs.send('service_0j957un', 'template_0qklrj3', templateParams).then(function(response) {
        console.log('SUCCESS!', response.status, response.text);
        loader.classList.add("hidden");
        success.classList.remove("hidden");
        submit.setAttribute("disabled", "");
        }, function(error) {
          loader.classList.remove("hidden");
          fail.classList.remove("hidden");
        });
    } 
})
</script>
<script src="index.js"></script>
</body>
</html>